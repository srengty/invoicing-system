import{a0 as T,u as S,C as q,d as g,e as m,i as r,j as n,f as d,q as c,g as l,h as b,k as f,t as p,v as k,y as B,_ as N,W as x}from"./app-DZTdZYTv.js";import{d as C}from"./index-B9TghNQy.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as A,s as i}from"./index-BFVOh3Gg.js";const I={class:"create-customer text-sm"},O={class:"p-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 ml-4 mr-4"},P={key:0,class:"flex justify-end gap-2 mr-4 mb-2"},W={__name:"Customers",props:{mode:{type:String,required:!0,validator:t=>["create","edit","view"].includes(t)},customer:{type:Object,default:()=>({})},errors:Object,redirect_route:String,customerCategories:Array},emits:["close"],setup(t,{emit:E}){const z=T(),v=S(),a=t,V=E,s=q({name:a.customer.name||"",code:a.customer.code||"",address:a.customer.address||"",email:a.customer.email||"",phone_number:a.customer.phone_number||"",contact_person:a.customer.contact_person||"",telegram_number:a.customer.telegram_number||"",credit_period:a.customer.credit_period||"15",website:a.customer.website||"",bank_name:a.customer.bank_name||"",bank_address:a.customer.bank_address||"",bank_account_name:a.customer.bank_account_name||"",bank_account_number:a.customer.bank_account_number||"",bank_swift:a.customer.bank_swift||"",redirect_route:a.redirect_route||"customers.index",customer_category_id:a.customer.customer_category_id||""}),w=(u,e,o,_=4e3)=>{v.add({group:"tc",severity:u,summary:e,detail:o,life:_,className:"my-custom-toast"})},U=()=>{if(!s){v.add({severity:"error",summary:"Error",detail:"Please fill in all required fields.",life:3e3}),w("warn","Validation Error","Please fill in all required fields.");return}parseInt(s.credit_period)>30?z.require({message:"The credit period is over 30 days. Are you sure you want to proceed?",header:"Credit Period Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{y()},reject:()=>{v.add({severity:"info",summary:"Action Cancelled",detail:"The submission has been cancelled.",life:3e3})}}):y()},y=()=>{a.mode==="create"?s.post(route("customers.store"),{onSuccess:()=>{v.add({severity:"success",summary:"Success",detail:"Customer created successfully!",life:3e3}),setTimeout(()=>{V("close"),C.Inertia.visit(route(a.redirect_route))},1e3),w("success","Customer Created","Your new customer has been successfully created!",4e3),setTimeout(()=>{V("close"),x.push(route(a.redirect_route))},1e3)},onError:u=>{w("error","Error","There was an error creating the customer."),console.error(u)}}):a.mode==="edit"&&s.put(route("customers.update",a.customer.id),{onSuccess:()=>{v.add({severity:"success",summary:"Success",detail:"Customer updated successfully!",life:3e3}),setTimeout(()=>{V("close"),C.Inertia.visit(route(a.redirect_route))},1e3),w("success","Success","Customer updated successfully!"),setTimeout(()=>{V("close"),x.push(route(a.redirect_route))},1e3)},onError:u=>{w("error","Error","There was an error updating the customer."),console.error(u)}})};return(u,e)=>(m(),g("div",I,[r("form",{onSubmit:N(U,["prevent"]),class:""},[r("div",O,[r("div",null,[e[15]||(e[15]=r("label",{for:"code",class:"block text-sm font-medium required"}," Customer category ",-1)),d(l(A),{modelValue:l(s).customer_category_id,"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).customer_category_id=o),options:t.customerCategories,optionLabel:"category_name_english",optionValue:"id",placeholder:"Select customer category",class:"w-full",disabled:t.mode==="view"},null,8,["modelValue","options","disabled"]),l(s).errors.customer_category_id?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.customer_category_id),1)]),_:1})):n("",!0)]),r("div",null,[e[16]||(e[16]=r("label",{for:"name",class:"block text-sm font-medium required"}," Customer/Organization name ",-1)),d(l(i),{id:"name",modelValue:l(s).name,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).name=o),class:"w-full",size:"small",placeholder:"Enter Customer/Organization name",disabled:t.mode==="view"},null,8,["modelValue","disabled"]),l(s).errors.name?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.name),1)]),_:1})):n("",!0)]),r("div",null,[e[17]||(e[17]=r("label",{for:"code",class:"block text-sm font-medium required"}," Customer code ",-1)),d(l(i),{id:"code",modelValue:l(s).code,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).code=o),class:"w-full",size:"small",placeholder:"Enter code",disabled:t.mode==="view"},null,8,["modelValue","disabled"]),l(s).errors.code?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.code),1)]),_:1})):n("",!0)]),r("div",null,[e[18]||(e[18]=r("label",{for:"credit_period",class:"block text-sm font-medium"}," Credit period (days) ",-1)),d(l(i),{class:"w-full",size:"small",modelValue:l(s).credit_period,"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).credit_period=o),placeholder:"Enter credit period",disabled:t.mode==="view"},null,8,["modelValue","disabled"]),l(s).errors.credit_period?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.credit_period),1)]),_:1})):n("",!0)]),r("div",null,[e[19]||(e[19]=r("label",{for:"address",class:"block text-sm font-medium required"}," Address ",-1)),d(l(i),{id:"address",modelValue:l(s).address,"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).address=o),class:"w-full",size:"small",placeholder:"Enter address",disabled:t.mode==="view"},null,8,["modelValue","disabled"]),l(s).errors.address?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.address),1)]),_:1})):n("",!0)]),r("div",null,[e[20]||(e[20]=r("label",{for:"website",class:"block text-sm font-medium"}," Website ",-1)),d(l(i),{id:"website",modelValue:l(s).website,"onUpdate:modelValue":e[5]||(e[5]=o=>l(s).website=o),class:"w-full",size:"small",placeholder:"Enter website",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),e[30]||(e[30]=r("div",{class:"col-span-1 sm:col-span-2 md:col-span-3"},[r("hr")],-1)),r("div",null,[e[21]||(e[21]=r("label",{for:"contact_person",class:"block text-sm font-medium"}," Contact person name ",-1)),d(l(i),{id:"contact_person",modelValue:l(s).contact_person,"onUpdate:modelValue":e[6]||(e[6]=o=>l(s).contact_person=o),class:"w-full",size:"small",placeholder:"Enter contact person name",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[22]||(e[22]=r("label",{for:"phone_number",class:"block text-sm font-medium required"}," Phone ",-1)),d(l(i),{id:"phone_number",modelValue:l(s).phone_number,"onUpdate:modelValue":e[7]||(e[7]=o=>l(s).phone_number=o),class:"w-full",size:"small",placeholder:"Enter phone number",disabled:t.mode==="view"},null,8,["modelValue","disabled"]),l(s).errors.phone_number?(m(),c(l(k),{key:0,severity:"error",size:"small",variant:"simple",class:"col-span-2"},{default:b(()=>[f(p(l(s).errors.phone_number),1)]),_:1})):n("",!0)]),r("div",null,[e[23]||(e[23]=r("label",{for:"telegram_number",class:"block text-sm font-medium"}," Telegram Number ",-1)),d(l(i),{id:"telegram_number",modelValue:l(s).telegram_number,"onUpdate:modelValue":e[8]||(e[8]=o=>l(s).telegram_number=o),class:"w-full",size:"small",placeholder:"Enter telegram number",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[24]||(e[24]=r("label",{for:"email",class:"block text-sm font-medium"}," Email ",-1)),d(l(i),{id:"email",modelValue:l(s).email,"onUpdate:modelValue":e[9]||(e[9]=o=>l(s).email=o),class:"w-full",size:"small",placeholder:"Enter email",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),e[31]||(e[31]=r("div",{class:"col-span-1 sm:col-span-2 md:col-span-3"},[r("hr")],-1)),r("div",null,[e[25]||(e[25]=r("label",{for:"bank_name",class:"block text-sm font-medium"}," Bank name ",-1)),d(l(i),{id:"bank_name",modelValue:l(s).bank_name,"onUpdate:modelValue":e[10]||(e[10]=o=>l(s).bank_name=o),class:"w-full",size:"small",placeholder:"Enter bank name",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[26]||(e[26]=r("label",{for:"bank_address",class:"block text-sm font-medium"}," Bank address ",-1)),d(l(i),{id:"bank_address",modelValue:l(s).bank_address,"onUpdate:modelValue":e[11]||(e[11]=o=>l(s).bank_address=o),class:"w-full",size:"small",placeholder:"Enter bank address",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[27]||(e[27]=r("label",{for:"bank_account_name",class:"block text-sm font-medium"}," Bank account name ",-1)),d(l(i),{id:"bank_account_name",modelValue:l(s).bank_account_name,"onUpdate:modelValue":e[12]||(e[12]=o=>l(s).bank_account_name=o),class:"w-full",size:"small",placeholder:"Enter bank account name",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[28]||(e[28]=r("label",{for:"bank_account_number",class:"block text-sm font-medium"}," Bank account number ",-1)),d(l(i),{id:"bank_account_number",modelValue:l(s).bank_account_number,"onUpdate:modelValue":e[13]||(e[13]=o=>l(s).bank_account_number=o),class:"w-full",size:"small",placeholder:"Enter bank account number",disabled:t.mode==="view"},null,8,["modelValue","disabled"])]),r("div",null,[e[29]||(e[29]=r("label",{for:"bank_swift",class:"block text-sm font-medium"}," Bank swift ",-1)),d(l(i),{id:"bank_swift",modelValue:l(s).bank_swift,"onUpdate:modelValue":e[14]||(e[14]=o=>l(s).bank_swift=o),class:"w-full",size:"small",placeholder:"Enter bank swift",disabled:t.mode==="view"},null,8,["modelValue","disabled"])])]),t.mode!=="view"?(m(),g("div",P,[d(l(B),{label:t.mode==="create"?"Create":"Update",class:"p-button-primary w-38",type:"submit",outlined:""},null,8,["label"])])):n("",!0)],32)]))}},M=j(W,[["__scopeId","data-v-9b056b50"]]);export{M as C};
