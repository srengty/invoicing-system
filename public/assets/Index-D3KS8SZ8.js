import{u as F,a0 as X,a as n,n as G,c as h,d as x,e as g,f as a,g as r,m as H,a1 as J,s as K,h as l,i as o,P as M,j as Q,k as A,l as I,t as L,y as C,F as E,x as R,q as Y,X as _,W as z}from"./app-DZTdZYTv.js";import"./index-B9TghNQy.js";import{_ as Z}from"./GuestLayout-BfdKZXvL.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as $}from"./Customers-xC9BxO7z.js";import{N as te}from"./NavbarLayout-Bz1XHzsh.js";import{s as se}from"./index-m66pCNzn.js";import{s as ae}from"./index-BkHZy9nH.js";import{s as re}from"./index-BFVOh3Gg.js";import{b as oe,c as V}from"./index-Dm6_jG8z.js";/* empty css                                                    */import"./index-Ch5aU8qY.js";import"./index-DRzkQ_aZ.js";import"./index-CHXn2h8A.js";import"./index-B9Lb2ArG.js";const le={class:"py-3"},ie={class:"customers p-4"},ne={class:"flex justify-between items-center pb-4"},ue={class:"flex items-center gap-2"},de={class:"flex gap-2"},ce={__name:"Index",props:{customers:Array,customerCategories:Array},setup(d){const S=F(),U=X(),i=n("name"),u=d,T=G(),j=h(()=>[{label:"",to:"/",icon:"pi pi-home"},{label:T.props.title||"Customers",to:route("customers.index")}]),k=[{field:"name",header:"Name",style:{width:"5%"}},{field:"code",header:"Code",style:{width:"5%"}},{field:"credit_period",header:"Credit Period",style:{width:"5%"}},{field:"address",header:"Address",style:{width:"5%"}},{field:"website",header:"Website",style:{width:"5%"}},{field:"phone_number",header:"Phone",style:{width:"5%"}}];n(k);const B=n(k),c=n(!1),m=n(!1),p=n(!1),v=n(null),b=n(""),O=[{label:"Name",value:"name"},{label:"Code",value:"code"},{label:"Phone",value:"phone_number"},{label:"Email",value:"email"},{label:"Address",value:"address"},{label:"Credit Period",value:"credit_period"},{label:"Category",value:"customer_category_name"}],D=h(()=>{const s=b.value.toLowerCase();return s?u.customers.filter(e=>i.value==="name"?e.name.toLowerCase().includes(s):i.value==="code"?e.code.toLowerCase().includes(s):i.value==="phone_number"?e.phone_number.toLowerCase().includes(s):i.value==="email"?e.email.toLowerCase().includes(s):i.value==="address"?e.address.toLowerCase().includes(s):i.value==="credit_period"?e.credit_period.toString().includes(s):i.value==="active"?e.active.toLowerCase().includes(s):i.value==="customer_category_name"?N(e.customer_category_id).toLowerCase().includes(s):!1):u.customers}),N=s=>{const e=u.customerCategories.find(t=>t.id===s);return e?e.category_name_english:"Unknown Category"},P=s=>{const e=u.customers.find(t=>t.id===s);v.value=e,m.value=!0},W=s=>{const e=u.customers.find(t=>t.id===s);v.value=e,p.value=!0},w=n(u.customers.map(s=>({...s,active:s.active||"deactivate"})));h(()=>w.value.map((s,e)=>({...s,index:e+1})));const y=(s,e,t,f=4e3)=>{S.add({group:"tc",severity:s,summary:e,detail:t,life:f,className:"my-custom-toast"})},q=s=>{const e=s.active?"deactivate":"activate";U.require({message:`Are you sure you want to ${e} this customer?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{z.put(route("customers.toggleActive",s.id),{active:!s.active},{onSuccess:()=>{y("success","Success",`Customer successfully ${e}d!`),w.value=w.value.map(t=>t.id===s.id?{...t,active:!t.active}:t),z.reload({preserveScroll:!0})},onError:t=>{y("error","Error",`There was an error ${e}ing the customer. Please try again later.`),console.error("Error toggling active status:",t)}})},reject:()=>{y("info","Cancelled","No changes were made.")}})};return(s,e)=>(g(),x(E,null,[a(r(H),{title:"Customers/Organization Name"}),a(r(J)),a(r(K),{position:"top-center",group:"tc"}),a(Z,null,{default:l(()=>[a(te),o("div",le,[a(r(se),{model:j.value,class:"border-none bg-transparent p-0"},{item:l(({item:t})=>[a(r(M),{href:t.to,class:"text-sm hover:text-primary flex items-start justify-center gap-1"},{default:l(()=>[t.icon?(g(),x("i",{key:0,class:I(t.icon)},null,2)):Q("",!0),A(" "+L(t.label),1)]),_:2},1032,["href"])]),_:1},8,["model"])]),o("div",ie,[o("div",ne,[e[9]||(e[9]=o("div",{class:"flex items-center gap-2"},[o("img",{src:"/User.png",alt:"Item Icon",class:"h-8 w-8 ml-4"}),o("h1",{class:"text-xl text-green-600"}," Customers/Organization Name ")],-1)),o("div",ue,[a(r(ae),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),options:O,optionLabel:"label",optionValue:"value",class:"w-48 text-sm",placeholder:"Search by"},null,8,["modelValue"]),a(r(re),{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),placeholder:"Search",class:"w-64",size:"small"},null,8,["modelValue"]),a(r(C),{icon:"pi pi-plus",label:"New Customer",onClick:e[2]||(e[2]=t=>c.value=!0),size:"small"})])]),a(r(oe),{value:D.value,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],class:"text-sm"},{default:l(()=>[a(r(V),{field:"customer_category_name",header:"Category",style:{width:"5%"}},{body:l(({data:t})=>[A(L(N(t.customer_category_id)),1)]),_:1}),(g(!0),x(E,null,R(B.value,t=>(g(),Y(r(V),{key:t.field,field:t.field,header:t.header},null,8,["field","header"]))),128)),a(r(V),{header:"Actions"},{body:l(t=>[o("div",de,[a(r(C),{icon:"pi pi-eye",class:"p-button-info","aria-label":"View",size:"small",onClick:f=>W(t.data.id),outlined:""},null,8,["onClick"]),a(r(C),{icon:"pi pi-pencil",class:"p-button-warning","aria-label":"Edit",size:"small",onClick:f=>P(t.data.id),outlined:""},null,8,["onClick"]),a(r(C),{icon:t.data.active?"pi pi-unlock":"pi pi-lock",label:t.data.active?"Activate":"Deactivate",class:I({"p-button-success":t.data.active,"p-button-danger":!t.data.active," w-28 h-8 flex items-center justify-center":!0}),"aria-label":"Toggle Active Status",size:"small",onClick:f=>q(t.data),outlined:""},null,8,["icon","label","class","onClick"])])]),_:1})]),_:1},8,["value"])]),a(r(_),{visible:c.value,"onUpdate:visible":e[4]||(e[4]=t=>c.value=t),modal:"",header:"Add Customer",class:"w-2/3"},{header:l(()=>e[10]||(e[10]=[o("div",{class:"flex items-center gap-2"},[o("img",{src:"/User.png",alt:"Item Customer",class:"h-8 w-8 ml-2"}),o("span",{class:"text-xl font-semibold bor"},"Add Customer")],-1)])),default:l(()=>[a($,{customerCategories:d.customerCategories,redirect_route:"customers.index",mode:"create",onClose:e[3]||(e[3]=t=>c.value=!1)},null,8,["customerCategories"])]),_:1},8,["visible"]),a(r(_),{visible:m.value,"onUpdate:visible":e[6]||(e[6]=t=>m.value=t),modal:"",header:"Edit Customer",class:"w-2/3"},{header:l(()=>e[11]||(e[11]=[o("div",{class:"flex items-center gap-2"},[o("img",{src:"/Item.png",alt:"Item Customer",class:"h-8 w-8 ml-2"}),o("span",{class:"text-xl font-semibold bor"},"Edit Customer")],-1)])),default:l(()=>[a($,{customerCategories:d.customerCategories,redirect_route:"customers.index",mode:"edit",customer:v.value,onClose:e[5]||(e[5]=t=>m.value=!1)},null,8,["customerCategories","customer"])]),_:1},8,["visible"]),a(r(_),{visible:p.value,"onUpdate:visible":e[8]||(e[8]=t=>p.value=t),modal:"",header:"View Customer",class:"w-2/3"},{header:l(()=>e[12]||(e[12]=[o("div",{class:"flex items-center gap-2"},[o("img",{src:"/Item.png",alt:"Item Customer",class:"h-8 w-8 ml-2"}),o("span",{class:"text-xl font-semibold bor"},"Customer Details")],-1)])),default:l(()=>[a($,{customerCategories:d.customerCategories,redirect_route:"customers.index",mode:"view",customer:v.value,onClose:e[7]||(e[7]=t=>p.value=!1)},null,8,["customerCategories","customer"])]),_:1},8,["visible"])]),_:1})],64))}},Ne=ee(ce,[["__scopeId","data-v-b011025c"]]);export{Ne as default};
